name: "Date-Time Commit Release"
description: "Creates a GitHub release with a tag based on commit date and SHA"
author: "Igor Gatis"

inputs:
  commit:
    description: "Commit reference to release (branch, tag, or commit hash)"
    required: true
  github-token:
    description: "GitHub token for API access"
    required: true
    default: ${{ github.token }}
  tag-format:
    description: 'Tag format template. Tokens: {YYYY}, {YY}, {MM}, {M}, {DD}, {D}, {HH}, {H}, {mm}, {m}, {ss}, {s}, {sha}, {sha:N}. Default: "{YYYY}{MM}{DD}-{HH}{mm}{ss}-{sha:7}"'
    required: false
    default: "{YYYY}{MM}{DD}-{HH}{mm}{ss}-{sha:7}"
  release-name:
    description: 'Release name template. Use {tag} placeholder. Default: "Release {tag}"'
    required: false
    default: "Release {tag}"

outputs:
  tag:
    description: "The generated release tag"
    value: ${{ steps.generate.outputs.tag }}
  iso-date:
    description: "The commit date in ISO 8601 format (UTC)"
    value: ${{ steps.generate.outputs.iso-date }}
  short-sha:
    description: "The short commit SHA (7 characters)"
    value: ${{ steps.generate.outputs.short-sha }}
  long-sha:
    description: "The full commit SHA"
    value: ${{ steps.generate.outputs.long-sha }}

runs:
  using: "node20"
  main: "dist/index.js"

branding:
  icon: "tag"
  color: "blue"
